---
top: 3
---

# ç¼–ç¨‹è§„èŒƒ

> è®°å½•è‡ªå·±æ‰€æ€»ç»“å’Œéµå®ˆçš„ç¼–ç¨‹è§„èŒƒï¼ˆå³ä¸ªäººé£æ ¼æŒ‡å—ï¼‰
> 
> æ¨èä¹¦ç±ï¼šã€Šé˜¿é‡Œå·´å·´Javaå¼€å‘æ‰‹å†Œï¼ˆæ³°å±±ç‰ˆï¼‰.pdfã€‹

## å‘½åè§„èŒƒä¸é¡¹ç›®ç»“æ„

### å‘½åè§„èŒƒ

å‘½åè§„èŒƒæ˜¯ç¼–ç¨‹è§„èŒƒä¸­æœ€é‡è¦çš„ä¸€éƒ¨åˆ†ï¼Œå®ƒç›´æ¥å½±å“åˆ°ä»£ç çš„å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§

::: tip å¸¸ç”¨çš„å‘½åå½¢å¼

- `camelCase` å°é©¼å³°å¼å‘½åæ³•ï¼ˆé¦–å­—æ¯å°å†™ï¼‰
- `PascalCase` å¤§é©¼å³°å¼å‘½åæ³•ï¼ˆé¦–å­—æ¯å¤§å†™ï¼‰
- `snake_case` ä¸‹åˆ’çº¿å‘½åæ³•
- `kebab-case` çŸ­æ¨ªçº¿å‘½åæ³•
- `UPPER_CASE` å¤§å†™å‘½åæ³•

:::

### Android å¼€å‘ç¼–ç¨‹è§„èŒƒ

::: info
æœ¬è§„èŒƒé€‚ç”¨äº Android å¼€å‘ï¼Œæ¶µç›–æ–‡ä»¶å‘½åã€å˜é‡å‘½åå’Œå…¶ä»–æœ€ä½³å®è·µã€‚
ä¹Ÿå¯ä»¥å‚è€ƒå†…å®¹: [otlinå¼€å§‹åŸºç¡€çŸ¥è¯†(ä¸‰ï¼‰ï¼šç¼–ç è§„èŒƒ](https://blog.csdn.net/m0_47308415/article/details/131779165)
:::

### æ–‡ä»¶å‘½åè§„èŒƒ

- é¡¹ç›®åç§°ä½¿ç”¨çŸ­æ¨ªçº¿å‘½åæ³•ã€‚ğŸŒ° `my-android-app`
- æºæ–‡ä»¶ä½¿ç”¨å°å†™å­—æ¯ä¸çŸ­æ¨ªçº¿è¿æ¥æ³•ã€‚ğŸŒ° `user-profile.kt`
- ç»„ä»¶æ–‡ä»¶ä½¿ç”¨å¤§å†™é©¼å³°å¼å‘½åæ³•ã€‚ğŸŒ° `UserProfile.kt`
- èµ„æºæ–‡ä»¶ä½¿ç”¨çŸ­æ¨ªçº¿å‘½åæ³•ã€‚ğŸŒ° `ic_user_avatar.xml`

### å‘½åè§„èŒƒ

- å¸¸é‡ä½¿ç”¨å¤§å†™å‘½åæ³•ã€‚ğŸŒ° `const val MAX_COUNT = 100`
- å˜é‡ä½¿ç”¨å°é©¼å³°å¼å‘½åæ³•ã€‚ğŸŒ° `val userCount = 100`
- ç±»åä½¿ç”¨å¤§é©¼å³°å¼å‘½åæ³•ã€‚ğŸŒ° `data class User(val name: String)`
- å‡½æ•°ä½¿ç”¨å°é©¼å³°å¼å‘½åæ³•ã€‚ğŸŒ° `fun getUserInfo() { }`
- å¯¹è±¡å±æ€§ä½¿ç”¨å°é©¼å³°å¼å‘½åæ³•ã€‚ğŸŒ° `val user = User(name = "maomao")`

### å…¶ä»–æœ€ä½³å®è·µ

- é‡‡ç”¨å•ä¸€è´£ä»»åŸåˆ™ï¼Œç¡®ä¿æ¯ä¸ªç±»å’Œå‡½æ•°åªè´Ÿè´£ä¸€ä¸ªåŠŸèƒ½ã€‚
- ä½¿ç”¨æ³¨é‡Šè§£é‡Šå¤æ‚é€»è¾‘ï¼Œä½†é¿å…å†—ä½™æ³¨é‡Šã€‚
- åœ¨å‡½æ•°å’Œç±»çš„å‘½åä¸­ä½¿ç”¨åŠ¨è¯å’Œåè¯ï¼Œæ¸…æ™°è¡¨è¾¾å…¶æ„å›¾ã€‚ğŸŒ° `fun fetchUserData()`
- é¿å…ä½¿ç”¨é­”æ³•æ•°å­—ï¼Œä½¿ç”¨å¸¸é‡æ›¿ä»£ã€‚ğŸŒ° `const val TIMEOUT_DURATION = 5000`


### é¡¹ç›®ç»“æ„

> å¯¹äºå®‰å“çš„é¡¹ç›®ç»“æ„å¾—çœ‹è®¾è®¡çš„æ¶æ„ï¼Œååˆ†å¤æ‚å¤šå˜ã€‚
> 
> ä»¥ä¸‹ä»‹ç»åŸºäº Jetpack Compose å’Œ MVI è®¾è®¡æ¨¡å¼çš„é¡¹ç›®ç»“æ„

1. **UI å±‚**

**Composable å‡½æ•°**ï¼šç”¨äºå®šä¹‰ç•Œé¢ï¼Œé€šå¸¸æ”¾åœ¨ `ui` ç›®å½•ä¸­ã€‚æŒ‰åŠŸèƒ½åˆ’åˆ†æˆä¸åŒçš„æ–‡ä»¶ã€‚

**ä¸»é¢˜å’Œæ ·å¼**ï¼šé›†ä¸­ç®¡ç†åº”ç”¨çš„ä¸»é¢˜å’Œæ ·å¼ï¼Œæ”¾åœ¨ `ui/theme` ç›®å½•ã€‚

2. **ViewModel å±‚**

**ViewModel**ï¼šç”¨äºå¤„ç† UI é€»è¾‘ï¼Œå­˜å‚¨ç•Œé¢çŠ¶æ€ï¼Œé€šå¸¸æ”¾åœ¨ `viewmodel` ç›®å½•ä¸­ã€‚

**Intent**ï¼šå®šä¹‰ç”¨æˆ·æ„å›¾å’Œæ“ä½œï¼Œæ”¾åœ¨ `viewmodel/intent` ç›®å½•ã€‚

3. **Model å±‚**

**æ•°æ®æ¨¡å‹**ï¼šå®šä¹‰åº”ç”¨ä¸­çš„æ•°æ®ç»“æ„ï¼Œé€šå¸¸æ”¾åœ¨ `model` ç›®å½•ã€‚

**æ•°æ®æº**ï¼šåŒ…æ‹¬ç½‘ç»œè¯·æ±‚å’Œæœ¬åœ°å­˜å‚¨çš„å®ç°ï¼Œæ”¾åœ¨ `repository` æˆ– `data` ç›®å½•ã€‚

4. **çŠ¶æ€ç®¡ç†**

**UI çŠ¶æ€**ï¼šä½¿ç”¨æ•°æ®ç±»å®šä¹‰ UI çŠ¶æ€ï¼Œé€šå¸¸æ”¾åœ¨ `state` ç›®å½•ã€‚

**çŠ¶æ€å¤„ç†**ï¼šåœ¨ ViewModel ä¸­ç®¡ç†çŠ¶æ€å˜æ›´å’Œè½¬æ¢é€»è¾‘ã€‚

5. **å¯¼èˆª**

**å¯¼èˆªç»„ä»¶**ï¼šç®¡ç†ä¸åŒç•Œé¢çš„å¯¼èˆªé€»è¾‘ï¼Œé€šå¸¸æ”¾åœ¨ `navigation` ç›®å½•ã€‚

6. **ä¾èµ–æ³¨å…¥**
**ä¾èµ–ç®¡ç†**ï¼šä½¿ç”¨ Dagger æˆ– Hilt ç­‰å·¥å…·è¿›è¡Œä¾èµ–æ³¨å…¥ï¼Œé€šå¸¸æ”¾åœ¨ `di` ç›®å½•ã€‚

7. **æµ‹è¯•**
**å•å…ƒæµ‹è¯•**ï¼šå¯¹ ViewModel å’Œä¸šåŠ¡é€»è¾‘è¿›è¡Œå•å…ƒæµ‹è¯•ï¼Œé€šå¸¸æ”¾åœ¨ `test` ç›®å½•ã€‚

8. **UI æµ‹è¯•**ï¼šå¯¹ Composable å‡½æ•°è¿›è¡Œ UI æµ‹è¯•ï¼Œé€šå¸¸æ”¾åœ¨ `androidTest` ç›®å½•ã€‚

**å‚è€ƒç›®å½•**

```sh
app
  â”œâ”€â”€ ui
  â”‚   â”œâ”€â”€ HomeScreen.kt  # ä¸»å±å¹•çš„ Composable å‡½æ•°
  â”‚   â”œâ”€â”€ DetailScreen.kt  # è¯¦ç»†ä¿¡æ¯å±å¹•çš„ Composable å‡½æ•°
  â”‚   â””â”€â”€ theme
  â”‚       â””â”€â”€ Theme.kt  # ä¸»é¢˜å’Œæ ·å¼è®¾ç½®
  â”œâ”€â”€ viewmodel
  â”‚   â”œâ”€â”€ HomeViewModel.kt  # å¤„ç†ä¸»å±å¹•é€»è¾‘çš„ ViewModel
  â”‚   â””â”€â”€ DetailViewModel.kt  # å¤„ç†è¯¦ç»†ä¿¡æ¯å±å¹•é€»è¾‘çš„ ViewModel
  â”œâ”€â”€ model
  â”‚   â””â”€â”€ User.kt  # ç”¨æˆ·æ•°æ®æ¨¡å‹
  â”œâ”€â”€ repository
  â”‚   â””â”€â”€ UserRepository.kt  # æ•°æ®æºç®¡ç†
  â”œâ”€â”€ navigation
  â”‚   â””â”€â”€ AppNavigator.kt  # åº”ç”¨çš„å¯¼èˆªé€»è¾‘
  â”œâ”€â”€ di
  â”‚   â””â”€â”€ AppModule.kt  # ä¾èµ–æ³¨å…¥æ¨¡å—
  â”œâ”€â”€ state
  â”‚   â””â”€â”€ UserState.kt  # ç”¨æˆ·ç•Œé¢çš„çŠ¶æ€ç®¡ç†
  â””â”€â”€ test
      â””â”€â”€ HomeViewModelTest.kt  # HomeViewModel çš„å•å…ƒæµ‹è¯•
```

## `Git` è§„èŒƒ

è¿™é‡Œç»™å¤§å®¶æ¨èé˜…è¯»: [ä¸€ç§ç®€æ´åˆä¸å¤±ä¼˜é›…çš„å·¥ä½œæµï¼šæç‹ flow](https://xie.infoq.cn/article/6b1f70c0203e38ceaccd11879)

### `Git` æµç¨‹è§„èŒƒ(æç‹flow)

æ³¨æ„ï¼š`æç‹flow`é€‚ç”¨äºå…¬å¸å°å‹é¡¹ç›®ï¼Œgithubå¼€æºé¡¹ç›®æœ€å¥½ä½¿ç”¨`github flow`ã€‚
[ä¸€ç§ç®€æ´åˆä¸å¤±ä¼˜é›…çš„å·¥ä½œæµï¼šæç‹ flow](https://xie.infoq.cn/article/6b1f70c0203e38ceaccd11879) æœ‰ä»‹ç»ä¸‰ç§ä¸åŒçš„å·¥ä½œæµã€‚

**åˆ†æ”¯æ¨¡å‹**

åˆ†æ”¯æ¨¡å‹å¦‚ä¸‹å›¾ï¼š

 - å…±äº«å¼€å‘åˆ†æ”¯ï¼ˆDevelopï¼‰ï¼šç”¨äºé›†æˆåŠŸèƒ½åˆ†æ”¯çš„ä»£ç ï¼Œç”±äºè®¾ç½®äº†ä¿æŠ¤åˆ†æ”¯ï¼Œæ‰€ä»¥åº”æ ¹æ®éœ€æ±‚åˆ›å»ºç‰¹æ€§åˆ†æ”¯ï¼Œé€šè¿‡è‡ªåŠ¨åŒ–æµæ°´çº¿è¿›è¡Œè´¨é‡çœ‹æŠ¤ï¼Œç»ä»£ç è¯„å®¡ååˆå…¥å…±äº«å¼€å‘åˆ†æ”¯ï¼ŒåŒæ—¶é»˜è®¤åˆ é™¤ç‰¹æ€§åˆ†æ”¯ï¼›

 - ä¸»åˆ†æ”¯ï¼ˆMainï¼‰ï¼šç”¨äºæ­£å¼ç‰ˆæœ¬å’Œçƒ­ä¿®å¤ç‰ˆæœ¬å‘å¸ƒã€‚ç”±äº`Master`ä¸€è¯æœ‰æ‰€äº‰è®®ï¼Œå› æ­¤æˆ‘ä»¬ä¸»åˆ†æ”¯é‡‡ç”¨`Main`

![img](style-guide.assets/c2d8786167c5a21787e1be17d99423e3.png)

**åˆ†æ”¯å‘½åè§„èŒƒ**

> **æ­£åˆ™è¡¨è¾¾å¼**ï¼ˆå¦‚æœæ˜¯å°å‹é¡¹ç›®ï¼Œå¯çœç•¥ develop åˆ†æ”¯ï¼‰ï¼š
>
> main|develop|(\d+\-(feature|bugfix|hotfix)\-[A-Za-z0-9]+)
>
> 
>
> **åˆ†æ”¯ç¤ºä¾‹**ï¼š
>
> masterï¼šä¸»åˆ†æ”¯
>
> developï¼šå…±äº«å¼€å‘åˆ†æ”¯
>
> 1-feature-sms-deng-luï¼šéœ€æ±‚åˆ†æ”¯
>
> 2-bugfix-sms-repeatï¼šç¼ºé™·åˆ†æ”¯
>
> 3-hotfix-register-failedï¼šçƒ­ä¿®åˆ†æ”¯

å…¶ä¸­æ•°å­—ä¸ºéœ€æ±‚/ç¼ºé™·çš„ IDï¼Œæ‰€ä»¥åº”å½“å…ˆåˆ›å»ºéœ€æ±‚/ç¼ºé™·ï¼Œå†å†™ä»£ç ï¼Œ**æœç»ã€Œå£å¤´åŠ éœ€æ±‚ã€ã€ã€Œå£å¤´æŠ¥ bugã€çš„æƒ…å†µ**ã€‚é€šè¿‡éœ€æ±‚åˆ†æ”¯å’Œåˆå¹¶è¯·æ±‚è‰ç¨¿åŠŸèƒ½ï¼Œå¯ä»¥æ–¹ä¾¿åœ°ä¸ºéœ€æ±‚äººå‘˜åˆ›å»ºéœ€æ±‚åˆ†æ”¯ï¼Œæš‚å­˜ä»£ç ä¿®æ”¹ã€‚

ä½¿ç”¨æç‹ GitLab åˆ›å»ºéœ€æ±‚/ç¼ºé™·åº”ä½¿ç”¨ã€Œfeature|bugfix|hotfixã€å¼€å¤´ï¼Œå¯ä»¥ä¸€é”®åˆ›å»ºç¬¦åˆè§„èŒƒçš„åˆ†æ”¯ï¼Œå¼€å‘äººå‘˜å†ä¹Ÿä¸ç”¨ä¸ºåˆ†æ”¯å‘½åå‘æ„ã€‚å¦å¤–ä¸­æ–‡éœ€æ±‚ï¼ˆissueï¼‰å¯è‡ªåŠ¨è½¬åŒ–ä¸ºæ‹¼éŸ³åˆ†æ”¯åï¼Œä¾‹å¦‚ï¼šFeatureï¼šSMS ç™»å½•å˜ä¸º 1-feature-sms-deng-luã€‚

::: tip æç¤º
è¿™é‡Œæåˆ°çš„éœ€æ±‚/ç¼ºé™·çš„ IDï¼Œå°±æ˜¯æˆ‘ä»¬æçš„`issue`çš„IDã€‚

æ³¨æ„`issue`æ„ä¸ºé—®é¢˜ï¼Œä¸æ­¢åŒ…æ‹¬ç¼ºé™·ï¼Œä¹ŸåŒ…æ‹¬éœ€æ±‚ã€‚
:::


### `Git` æäº¤è§„èŒƒ(github)

> `git commit message` çš„æ ¼å¼

```sh
<type>(<scope>): <subject>

<body>

<footer>
```

- `type`ï¼ˆå¿…å¡«ï¼‰ï¼š`commit` çš„ç±»å‹
- `scope`ï¼ˆé€‰å¡«ï¼‰ï¼š`commit` çš„å½±å“èŒƒå›´
- `subject`ï¼ˆå¿…å¡«ï¼‰ï¼š`commit` ä¿¡æ¯çš„ç®€çŸ­æè¿°ï¼ˆ50 å­—ä»¥å†…ï¼‰
- `body`ï¼ˆé€‰å¡«ï¼‰ï¼š`commit` ä¿¡æ¯çš„å…·ä½“æè¿°
- `footer`ï¼ˆé€‰å¡«ï¼‰ï¼šé‡å¤§å˜åŒ–ï¼ˆ`Breaking Change`ï¼‰å’Œéœ€è¦å…³é—­çš„`Issue`

**æ­£åˆ™æ ¡éªŒè§„åˆ™**ï¼š

```js
/**
 * åŸºäº vue é¡¹ç›®ä¸­çš„ verify-commit-msg.js ä¿®æ”¹
 * https://github.com/vuejs/vue/blob/main/scripts/verify-commit-msg.js
 */
const commitRE =
  /^((revert|wip|draft): )?(feat|fix|docs|style|refactor|perf|types|test|build|ci|chore)(\(.+\))?: .{1,50}/
```
**ç¤ºä¾‹**ï¼š

```js
Author: suzhe <suzhe@xxxx.com>
Date:   Fri Sep 13 15:04:43 2024 +0800

feat: set LeanKeyboard as the default input method

- Add `config_enabled_input_methods` and `config_default_input_method` to use `com.liskovsoft.leankeyboard` as the default keyboard.
- verify the available input methods using:`adb shell ime list -s`

ISSUES CLOSED: #21
```

#### `commit` å¸¸ç”¨çš„ `type`

|       type       | å«ä¹‰                                   |
| :--------------: | :------------------------------------- |
|      _feat_      | æ–°åŠŸèƒ½                                 |
|      _fix_       | ä¿®å¤ bug                               |
|      _docs_      | æ–‡æ¡£ç±»æ”¹åŠ¨                             |
|     _style_      | ä»£ç æ ¼å¼æ”¹åŠ¨ï¼ŒåŒç†é€‚ç”¨äºä¸šåŠ¡æ ·å¼è°ƒæ•´   |
|    _refactor_    | é‡æ„ï¼ˆå³ä¸æ˜¯æ–°å¢åŠŸèƒ½ï¼Œä¹Ÿä¸æ˜¯ä¿®å¤ bugï¼‰ |
|      _perf_      | æ€§èƒ½ä¼˜åŒ–ç›¸å…³                           |
|     _types_      | `TypeScript` ç±»å‹ç›¸å…³çš„æ”¹åŠ¨            |
|      _test_      | å•å…ƒæµ‹è¯•ã€e2e æµ‹è¯•                     |
|     _build_      | æ„å»ºå·¥å…·æˆ–è€…ä¾èµ–é¡¹çš„æ”¹åŠ¨               |
|       _ci_       | ä¿®æ”¹é¡¹ç›®æŒç»­é›†æˆæµç¨‹                   |
|     _chore_      | å…¶ä»–ç±»å‹çš„æäº¤                         |
|     _revert_     | æ¢å¤æˆ–è¿˜åŸç›¸å…³æäº¤                     |
| _wip_ \| _draft_ | æ‰˜ç®¡å¹³å°å¯¹åº”çš„è‰ç¨¿æ ‡è¯†                 |

- [Conventional Commits | GitHub](https://github.com/conventional-commits/conventionalcommits.org)
- [Angular convention | Github](https://github.com/angular/angular/blob/22b96b9/CONTRIBUTING.md#-commit-message-guidelines)

### `tag` ä¸ç‰ˆæœ¬å·è§„èŒƒ

> **é‡‡ç”¨ npm å’Œè¯­ä¹‰åŒ–è§„èŒƒï¼Œç‰ˆæœ¬å·ä¸ä½¿ç”¨ v å‰ç¼€ï¼Œè€Œ Git tag ä½¿ç”¨ v å‰ç¼€ï¼Œé¿å…çº¯æ•°å­—å¯¼è‡´çš„é—®é¢˜ï¼Œæ­£åˆ™è¡¨è¾¾å¼**ï¼š
>
> v(\d+\.){1,2}\d+
>
> **ç¤ºä¾‹**ï¼š
>
> v0.1
>
> v1.2.0
>
> v2.0.0

å½“æå– Git tag ç”¨ä½œ Dockerã€mavenã€npm ç­‰ç‰ˆæœ¬å·æ—¶ï¼Œåº”åœ¨ä½¿ç”¨æ—¶å»é™¤ v å‰ç¼€ï¼Œæ¯”å¦‚ï¼š

[https://Github.com/nodejs/node/releases/tag/v19.1.0](https://xie.infoq.cn/link?target=https%3A%2F%2Fgithub.com%2Fnodejs%2Fnode%2Freleases%2Ftag%2Fv19.1.0)

docker pull node:19.1.0

maven se.bjurr.violations:violations-maven-plugin:1.50.4

